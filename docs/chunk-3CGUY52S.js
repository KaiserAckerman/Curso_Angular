import{A as x,B as he,C as G,D as Y,E as i,F as r,G as s,H as Q,I as g,J as k,K as Z,L as a,M as y,N as E,O as D,P as ve,Q as O,R as $,T as ce,U as R,V as se,W as be,X as Se,Y as J,Z as xe,a as ue,b as le,ba as _,c as pe,ca as Re,d as C,da as q,e as V,ea as K,f as M,fa as _e,g as N,h as me,i as U,j as de,k as H,l as ye,m as l,n as fe,o as P,p as I,q as L,r as A,s as ge,t as f,u as F,v as c,w as p,x as z,y as m,z as Ce}from"./chunk-NNSHXF4O.js";var j=class o{placeholder=f("Buscar");dobounceTime=f(3e3);initialValue=f();value=ge();inputValue=R(()=>this.initialValue()??"");debounceEffect=se(t=>{let n=this.inputValue(),e=setTimeout(()=>{this.value.emit(n)},this.dobounceTime());t(()=>{clearTimeout(e)})});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-country-search-input"]],inputs:{placeholder:[1,"placeholder"],dobounceTime:[1,"dobounceTime"],initialValue:[1,"initialValue"]},outputs:{value:"value"},decls:5,vars:2,consts:[["txtSearch",""],[1,"flex","flex-row","gap-2","mt-2"],["type","text","autofocus","",1,"input","input-bordered","mr-2","w-56",3,"keyup.enter","keyup","placeholder","value"],[1,"btn","btn-primary",3,"click"]],template:function(n,e){if(n&1){let u=Q();i(0,"section",1)(1,"input",2,0),g("keyup.enter",function(){P(u);let B=Z(2);return I(e.value.emit(B.value))})("keyup",function(){P(u);let B=Z(2);return I(e.inputValue.set(B.value))}),r(),i(3,"button",3),g("click",function(){P(u);let B=Z(2);return I(e.value.emit(B.value))}),a(4,"Buscar "),r()()}n&2&&(c(),m("placeholder",e.placeholder())("value",e.inputValue()))},encapsulation:2})};var we=o=>["/country/by",o],ke=(o,t)=>t.cca2;function Ee(o,t){if(o&1&&(i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),s(6,"img",2),r(),i(7,"td"),a(8),r(),i(9,"td"),a(10),r(),i(11,"td")(12,"span",3),a(13),O(14,"number"),r()(),i(15,"td")(16,"a",4),a(17,"Mas informacion"),r()()()),o&2){let n=t.$implicit,e=t.$index;c(2),y(e+1),c(2),y(n.flag),c(2),m("src",n.flagSvg,F)("alt",n.name),c(2),y(n.name),c(2),y(n.capital),c(3),y($(14,8,n.population)),c(3),m("routerLink",ve(10,we,n.cca2))}}function Te(o,t){if(o&1&&(i(0,"tr")(1,"td",5),a(2),r()()),o&2){let n=k();c(2),E(" ",n.errorMessage()," ")}}function Me(o,t){o&1&&(i(0,"tr")(1,"td",5),a(2," No se encontraron resultados "),r()())}function Pe(o,t){o&1&&(i(0,"tr")(1,"td",5),a(2," Buscando paises... "),r()())}var w=class o{countries=f.required();errorMessage=f();isLoading=f(!1);isEmpty=f(!1);static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-country-list"]],inputs:{countries:[1,"countries"],errorMessage:[1,"errorMessage"],isLoading:[1,"isLoading"],isEmpty:[1,"isEmpty"]},decls:23,vars:3,consts:[[1,"mt-5"],[1,"table","table-md","mt-2","w-full"],[1,"w-10",3,"src","alt"],[1,"badge","badge-secondary"],[1,"link-primary",3,"routerLink"],["colspan","8",1,"text-center"]],template:function(n,e){n&1&&(i(0,"section",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),a(5,"#"),r(),i(6,"th"),a(7,"Icono"),r(),i(8,"th"),a(9,"Bandera"),r(),i(10,"th"),a(11,"Nombre"),r(),i(12,"th"),a(13,"Capital"),r(),i(14,"th"),a(15,"Poblaci\xF3n"),r(),s(16,"th"),r()(),i(17,"tbody"),G(18,Ee,18,12,"tr",null,ke),z(20,Te,3,1,"tr")(21,Me,3,0,"tr")(22,Pe,3,0,"tr"),r()()()),n&2&&(c(18),Y(e.countries()),c(2),x(e.errorMessage()?20:-1),c(),x(e.countries().length===0&&!e.isLoading()?21:-1),c(),x(e.isLoading()?22:-1))},dependencies:[J,K],encapsulation:2})};var T=class{static mapRestCountryToCountry(t){return{capital:t.capital?.join(","),cca2:t.cca2,flag:t.flag,flagSvg:t.flags.svg,name:t.translations.spa.common??"No Spanish Name",population:t.population,region:t.region,subRegion:t.subregion}}static mapRestCountryArrayToCountryArray(t){return t.map(this.mapRestCountryToCountry)}};var W="https://restcountries.com/v3.1",v=class o{http=l(xe);queryCacheCapital=new Map;queryCacheCountry=new Map;queryCacheRegion=new Map;serachByCapital(t){t=t.toLowerCase();let n=`${W}/capital/${t}`;return this.queryCacheCapital.has(t)?C(this.queryCacheCapital.get(t)):this.http.get(n).pipe(M(e=>T.mapRestCountryArrayToCountryArray(e)),U(500),H(e=>this.queryCacheCapital.set(t,e)),N(e=>(console.log("Error en la peticion",e),V(()=>new Error("Error en la peticion")))))}serachByCountry(t){t=t.toLowerCase();let n=`${W}/name/${t}`;return this.queryCacheCountry.has(t)?C(this.queryCacheCountry.get(t)):this.http.get(n).pipe(M(e=>T.mapRestCountryArrayToCountryArray(e)),U(500),H(e=>this.queryCacheCountry.set(t,e)),N(e=>(console.log("Error en la peticion",e),V(()=>new Error("Error en la peticion")))))}serachCountryByAlphaCode(t){let n=`${W}/alpha/${t}`;return this.http.get(n).pipe(M(e=>T.mapRestCountryArrayToCountryArray(e)),M(e=>e.at(0)),N(e=>(console.log("Error en la peticion",e),V(()=>new Error(`No se pudo obtener paises con ese codigo ${t}`)))))}serachByRegion(t){let n=`${W}/region/${t}`;return this.queryCacheRegion.has(t)?C(this.queryCacheRegion.get(t)):this.http.get(n).pipe(M(e=>T.mapRestCountryArrayToCountryArray(e)),U(500),H(e=>this.queryCacheRegion.set(t,e)),N(e=>(console.log("Error en la peticion",e),V(()=>new Error("Error en la peticion")))))}static \u0275fac=function(n){return new(n||o)};static \u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"})};function S(o){return o?.injector||fe(S),be(le(ue({},o),{loader:t=>{let n=new pe;return t.abortSignal.addEventListener("abort",()=>n.next()),new Promise((e,u)=>{o.loader(t).pipe(me(1),de(n)).subscribe({next:e,error:u,complete:()=>u(new Error("Resource completed before producing a value"))})})}}))}var Ie=()=>[],X=class o{CountryService=l(v);activatedRoute=l(_);router=l(q);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=R(()=>this.queryParam);countryResource=S({request:()=>({query:this.query()}),loader:({request:t})=>t.query?(this.router.navigate(["/country/by-capital"],{queryParams:{query:t.query}}),this.CountryService.serachByCapital(t.query)):C([])});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-by-capital-page"]],decls:2,vars:7,consts:[["placeholder","Buscar por capital",3,"value","dobounceTime","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(n,e){if(n&1&&(i(0,"app-country-search-input",0),g("value",function(d){return e.query.set(d)}),r(),s(1,"app-country-list",1)),n&2){let u,d;m("dobounceTime",3e3)("initialValue",e.query()),c(),m("countries",(u=e.countryResource.value())!==null&&u!==void 0?u:D(6,Ie))("errorMessage",e.countryResource.error())("isEmpty",((d=e.countryResource.value())==null?null:d.length)===0)("isLoading",e.countryResource.isLoading())}},dependencies:[j,w],encapsulation:2})};var ee=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["country-top-menu"]],decls:17,vars:0,consts:[[1,"p-4","w-full"],[1,"menu","bg-base-200","sm:menu-horizontal","rounded-box"],["routerLink","by-capital","routerLinkActive","btn-primary",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","d","M.5 15.5v-2.25S6 10.5 9.75 9.5V4.211c0-.79.23-1.565.707-2.194c.364-.48.828-1.052 1.293-1.517h.5c.465.465.93 1.037 1.293 1.517c.478.629.707 1.404.707 2.194V9.5c3.75 1 9.25 3.75 9.25 3.75v2.25s-5.5-1-9.25-1c0 0-.5 2.28-.5 6.5c0 0 1.25.75 2.25 1.75v.5S13.75 23 12 23s-4 .25-4 .25v-.5c1-1 2.25-1.75 2.25-1.75c0-4.22-.5-6.5-.5-6.5c-3.75 0-9.25 1-9.25 1Z","stroke-width","1"],["routerLink","by-country","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M5.25 21.25v-6m0 0v-10a1.5 1.5 0 0 1 1.5-1.5h11.086a1 1 0 0 1 .821 1.571L15.75 9.5l2.907 4.179a1 1 0 0 1-.82 1.571z"],["routerLink","by-region","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","1.5","d","M15.29 20.663h3.017a2.194 2.194 0 0 0 2.193-2.194v-6.454a3.3 3.3 0 0 0-1.13-2.48l-5.93-5.166a2.194 2.194 0 0 0-2.88 0L4.63 9.534a3.3 3.3 0 0 0-1.13 2.481v6.454c0 1.212.982 2.194 2.194 2.194h3.29m6.306 0v-6.581c0-.908-.736-1.645-1.645-1.645H10.63c-.909 0-1.645.737-1.645 1.645v6.581m6.306 0H8.984"]],template:function(n,e){n&1&&(i(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),L(),i(4,"svg",3),s(5,"path",4),r(),a(6," Por capital "),r()(),A(),i(7,"li")(8,"a",5),L(),i(9,"svg",3),s(10,"path",6),r(),a(11," Por pais "),r()(),A(),i(12,"li")(13,"a",7),L(),i(14,"svg",3),s(15,"path",8),r(),a(16," Por region "),r()()()())},dependencies:[K,_e],encapsulation:2})};var te=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-country-layout"]],decls:3,vars:0,consts:[[1,"px-4"]],template:function(n,e){n&1&&(s(0,"country-top-menu"),i(1,"section",0),s(2,"router-outlet"),r())},dependencies:[Re,ee],encapsulation:2})};var Le=()=>[],ne=class o{CountryService=l(v);activatedRoute=l(_);router=l(q);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=R(()=>this.queryParam);countryResource=S({request:()=>({query:this.query()}),loader:({request:t})=>t.query?(this.router.navigate(["/country/by-country"],{queryParams:{query:t.query}}),this.CountryService.serachByCountry(t.query)):C([])});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-by-country-page"]],decls:2,vars:7,consts:[["placeholder","Buscar por pais",3,"value","dobounceTime","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(n,e){if(n&1&&(i(0,"app-country-search-input",0),g("value",function(d){return e.query.set(d)}),r(),s(1,"app-country-list",1)),n&2){let u,d;m("dobounceTime",3e3)("initialValue",e.query()),c(),m("countries",(u=e.countryResource.value())!==null&&u!==void 0?u:D(6,Le))("errorMessage",e.countryResource.error())("isEmpty",((d=e.countryResource.value())==null?null:d.length)===0)("isLoading",e.countryResource.isLoading())}},dependencies:[j,w],encapsulation:2})};var De=()=>[];function qe(o,t){if(o&1){let n=Q();i(0,"button",6),g("click",function(){let u=P(n).$implicit,d=k();return I(d.selectedRegion.set(u))}),a(1),r()}if(o&2){let n=t.$implicit,e=k();Ce("btn-primary",e.selectedRegion()===n),c(),E(" ",n," ")}}function je(o){return o=o.toLowerCase(),{africa:"Africa",americas:"Americas",asia:"Asia",europe:"Europe",oceania:"Oceania",antarctic:"Antarctic"}[o]??"Americas"}var oe=class o{CountryService=l(v);regions=["Africa","Americas","Asia","Europe","Oceania","Antarctic"];activatedRoute=l(_);router=l(q);queryParam=this.activatedRoute.snapshot.queryParamMap.get("region")??"";selectedRegion=R(()=>je(this.queryParam));countryResource=S({request:()=>({region:this.selectedRegion()}),loader:({request:t})=>t.region?(this.router.navigate(["/country/by-region"],{queryParams:{region:t.region}}),this.CountryService.serachByRegion(t.region)):C([])});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-by-region-page"]],decls:9,vars:5,consts:[[1,"text-2xl"],[1,"text-lg"],[1,"row","mt-2"],[1,"flex-col"],[1,"btn","btn-outline","mr-2","w-[100px]",3,"btn-primary"],[3,"countries","errorMessage","isEmpty","isLoading"],[1,"btn","btn-outline","mr-2","w-[100px]",3,"click"]],template:function(n,e){if(n&1&&(i(0,"h1",0),a(1,"Por region"),r(),i(2,"h3",1),a(3,"Seleccione una region"),r(),i(4,"section",2)(5,"div",3),G(6,qe,2,3,"button",4,he),r()(),s(8,"app-country-list",5)),n&2){let u,d;c(6),Y(e.regions),c(2),m("countries",(u=e.countryResource.value())!==null&&u!==void 0?u:D(4,De))("errorMessage",e.countryResource.error())("isEmpty",((d=e.countryResource.value())==null?null:d.length)===0)("isLoading",e.countryResource.isLoading())}},dependencies:[w],encapsulation:2})};var re=class o{location=l(Se);goBack(){this.location.back()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","mt-10"],["xmlns","http://www.w3.org/2000/svg","width","256","height","256","viewBox","0 0 256 256"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-width","1"],["stroke-width","15.992","d","M 32,48 V 207.9236"],["stroke-linejoin","round","stroke-width","15.992","d","M 224,96 V 208"],["stroke-linejoin","round","stroke-width","15.992","d","m 64,16 h 80"],["stroke-width","15.992","d","M 64,240 H 192"],["stroke-linejoin","round","stroke-width","15.992","d","m 224,208 c 0.0874,15.98169 -16,32 -32,32"],["stroke-linejoin","round","stroke-width","15.992","d","m -32,208 c -10e-7,16 -16,32 -32,32","transform","scale(-1 1)"],["stroke-linejoin","round","stroke-width","15.992","d","M -32,-47.976784 C -32,-32 -48,-16.356322 -63.999997,-16.000002","transform","scale(-1)"],["stroke-linejoin","round","stroke-width","15.992","d","M 223.91257,96.071779 144,16"],["stroke-linejoin","round","stroke-width","15.992","d","m -144,64 c -0.0492,15.912926 -16.06452,31.999995 -32,32","transform","scale(-1 1)"],["stroke-linejoin","round","stroke-width","15.992","d","M 144,64 V 16"],["stroke-linejoin","round","stroke-width","15.992","d","m 176,96 h 48"],["stroke-linejoin","round","stroke-width","16","d","m 64,208 48,-64"],["stroke-linejoin","round","stroke-width","16","d","m 64,144 48,64"],[1,"link-primary","cursor-pointer",3,"click"]],template:function(n,e){n&1&&(i(0,"section",0),L(),i(1,"svg",1)(2,"g",2),s(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8)(9,"path",9)(10,"path",10)(11,"path",11)(12,"path",12)(13,"path",13)(14,"path",14)(15,"path",15),r()(),A(),i(16,"h1"),a(17,"No se encontro el pais"),r(),i(18,"a",16),g("click",function(){return e.goBack()}),a(19,"Regresar"),r()())},encapsulation:2})};var ie=class o{country=f.required();currentYear=ce(()=>new Date().getFullYear());static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["country-information"]],inputs:{country:[1,"country"]},decls:42,vars:18,consts:[[1,"mx-10"],[1,"text-3xl"],[1,"text-3xl","font-thin"],[1,"stats","shadow"],[1,"stat","place-items-center"],[1,"stat-title"],[1,"stat-value"],[1,"stat-desc"],[1,"stat-value","text-secondary"],[1,"stat-desc","text-secondary"],[1,"diff","aspect-[16/9]"],[1,"diff-item-1"],[1,"blur","brightness-75",3,"alt","src"],[1,"diff-item-2"],[3,"alt","src"],[1,"diff-resizer"]],template:function(n,e){n&1&&(i(0,"section",0)(1,"h1",1),a(2),r(),i(3,"h2",2),a(4),O(5,"number"),r()(),i(6,"section",3)(7,"div",4)(8,"div",5),a(9,"Poblacion"),r(),i(10,"div",6),a(11),O(12,"number"),r(),i(13,"div",7),a(14),r()(),i(15,"div",4)(16,"div",5),a(17,"Nombre"),r(),i(18,"div",8),a(19),r(),i(20,"div",9),a(21),r()(),i(22,"div",4)(23,"div",5),a(24,"Sub Region"),r(),i(25,"div",6),a(26),r(),i(27,"div",7),a(28),r()(),i(29,"div",4)(30,"div",5),a(31,"Bandera"),r(),i(32,"div",6),a(33),r(),i(34,"div",7),a(35),r()()(),i(36,"section",10)(37,"div",11),s(38,"img",12),r(),i(39,"div",13),s(40,"img",14),r(),s(41,"div",15),r()),n&2&&(c(2),y(e.country().name),c(2),E("Poblacion: ",$(5,14,e.country().population),""),c(7),y($(12,16,e.country().population)),c(3),E("Desde ",e.currentYear(),""),c(5),y(e.country().name),c(2),y(e.country().region),c(5),y(e.country().subRegion),c(2),y(e.country().region),c(5),y(e.country().flag),c(2),y(e.country().subRegion),c(3),m("alt",e.country().name)("src",e.country().flagSvg,F),c(2),m("alt",e.country().name)("src",e.country().flagSvg,F))},dependencies:[J],encapsulation:2})};function Be(o,t){o&1&&s(0,"app-not-found")}function Ve(o,t){o&1&&(i(0,"h1",0),a(1,"Cargando..."),r())}function Ne(o,t){if(o&1&&s(0,"country-information",1),o&2){let n=k();m("country",n.countryResource.value())}}var ae=class o{countryCode=l(_).snapshot.params.code;CountryService=l(v);countryResource=S({request:()=>({code:this.countryCode}),loader:({request:t})=>this.CountryService.serachCountryByAlphaCode(t.code)});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=p({type:o,selectors:[["app-country-page"]],decls:3,vars:3,consts:[[1,"text-3xl"],[3,"country"]],template:function(n,e){n&1&&z(0,Be,1,0,"app-not-found")(1,Ve,2,0,"h1",0)(2,Ne,1,1,"country-information",1),n&2&&(x(e.countryResource.error()?0:-1),c(),x(e.countryResource.isLoading()?1:-1),c(),x(e.countryResource.hasValue()?2:-1))},dependencies:[re,ie],encapsulation:2})};var Ae=[{path:"",component:te,children:[{path:"by-capital",component:X},{path:"by-country",component:ne},{path:"by-region",component:oe},{path:"by/:code",component:ae},{path:"**",redirectTo:"by-capital"}]}],kn=Ae;export{Ae as countryRoutes,kn as default};
